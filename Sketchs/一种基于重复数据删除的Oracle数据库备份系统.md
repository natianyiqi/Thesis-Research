## 流程
    临时备份文件——>划分文件块——>计算指纹值（哈希函数）——>建立哈希表并记录指纹值（备份服务器中）——>检测重复数据——>存储数据和数据块索引
## 临时备份文件
    Oracle数据导出，使用Export将数据从数据库中提取出来，生成二进制临时文件。
## 划分文件块
    目前主要有固定尺寸分块和变长分块两大类。固定分块速度快，算法简单，但问题处理低效，数据改变时，重复数据检测困难。变长分块是将文件划分成不同的块，基于文件内容，长度可变化。
    基于可变分块的重复数据检测方法主要有CDC算法、fingerdiff算法。CDC不好把握分块的粒度大小，fingerdiff算法检测数据难以检测两个数据块中的微小变化。
    本文基于滑动块的重复数据删除技术，结合固定块大小检测与变长分块的优点。滑动块检测技术使用Rsync Checksum算法和滑动窗口方法进行分块。
## 计算指纹值并检测重复数据
    使用Checksum算法计算滑动窗口内数据块的求和校验值，如果校验值匹配
    则用SHA-1算法对数据块进行更严格的hash计算，比较SHA-1 hash值和存储的hash值检测重复数据，如果检测到重复数据，将重复数据块记录后，滑动窗口滑过这个重复快继续往前移动。
## 存储checksum校验和SHA-1 hash值
    如果Checksum校验值和已经存储的校验值不匹配，滑动窗口继续前移进行检测，如果滑动块移动的距离达到定长块长度时还没有检测到重复数据，将这个快的checksum校验和SHA-1 hash值计算并存储
    供将来数据块重复检测。
## 存储数据和数据块索引
    备份服务器的数据处理模块接收到备份代理传输过来的数据以后，将数据块的指纹值与备份系统索引表中的存储的指纹值比较，判断传过来的数据块是否已经存在于备份中心中。如果不是重复的数据块，将数据块和
    数据块的指纹值写入备份服务器的存储服务器中。为了解决备份服务器中数据块的增多，索引表越来越大，采用二级索引缓存，内存中一级缓存，磁盘中二级缓存。
## Oracle数据库恢复
    恢复数据库的步骤主要如下：在远程备份服务器中的第一级缓存索引列表中查找需要恢复文件的数据块指纹值。如果在第一级缓存中没有找到指纹值，继续在第二季缓存索引中查找。按照指纹值依次读出数据块。
    由于备份时数据块是按照顺序存放的，恢复时每读一个数据块都将会将会将其周围的数据块读入缓存中。加快恢复速度。
